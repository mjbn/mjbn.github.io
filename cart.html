<!DOCTYPE html>
<html lang="en" x-data="cartApp()" x-init="loadCart()" x-bind:class="darkMode ? 'dark' : ''">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart | TokyoNight</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <style>
    :root {
      --bg-dark: #1a1b26;
      --bg-light: #f5f5f5;
      --accent-blue: #7aa2f7;
      --accent-purple: #bb9af7;
      --accent-pink: #f7768e;
      --accent-green: #9ece6a;
      --text-dark: #c0caf5;
    }
  </style>
</head>
<body class="bg-[var(--bg-light)] dark:bg-[var(--bg-dark)] text-gray-800 dark:text-[var(--text-dark)] min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav class="bg-white dark:bg-[#1f2335] shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
      <a href="index.html" class="text-xl font-bold text-[var(--accent-blue)]">TokyoNight</a>
      <div class="space-x-4 hidden md:flex items-center">
        <a href="store.html" class="hover:text-[var(--accent-pink)]">Store</a>
        <a href="blog.html" class="hover:text-[var(--accent-pink)]">Blog</a>
        <a href="novels.html" class="hover:text-[var(--accent-pink)]">Novels</a>
        <a href="about.html" class="hover:text-[var(--accent-pink)]">About</a>
        <button @click="darkMode = !darkMode" class="px-3 py-1 bg-[var(--accent-purple)] text-white rounded-lg ml-2">
          <span x-show="!darkMode">üåô Dark</span>
          <span x-show="darkMode">‚òÄÔ∏è Light</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- Cart Section -->
  <section class="max-w-6xl mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold mb-8 text-[var(--accent-blue)]">üõí Your Cart</h1>

    <template x-if="cart.length === 0">
      <p class="text-gray-500">Your cart is empty. <a href="store.html" class="text-[var(--accent-pink)]">Go shopping ‚Üí</a></p>
    </template>

    <template x-if="cart.length > 0">
      <div class="grid gap-6">
        <template x-for="(item, index) in cart" :key="item.id">
          <div class="flex justify-between items-center p-4 bg-white dark:bg-[#24283b] rounded-xl shadow">
            <div>
              <h2 class="font-semibold text-[var(--accent-blue)]" x-text="item.name"></h2>
              <p class="text-sm text-gray-400" x-text="'$'+item.price.toFixed(2)"></p>
              <div class="flex items-center space-x-2 mt-1">
                <button @click="updateQuantity(index, -1)" class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded">-</button>
                <span x-text="item.quantity"></span>
                <button @click="updateQuantity(index, 1)" class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded">+</button>
              </div>
            </div>
            <button @click="removeFromCart(index)" class="text-[var(--accent-pink)] font-bold">√ó</button>
          </div>
        </template>

        <div class="text-right mt-4">
          <p class="font-bold text-xl mb-4">Total: $<span x-text="cartTotal().toFixed(2)"></span></p>
          <a href="checkout.html" class="inline-block bg-[var(--accent-pink)] text-white px-6 py-2 rounded-lg">Proceed to Checkout ‚Üí</a>
        </div>
      </div>
    </template>
  </section>

  <footer class="bg-white dark:bg-[#1f2335] text-center py-4 mt-auto">
    <p>&copy; 2025 TokyoNight. All rights reserved.</p>
  </footer>

  <!-- Alpine.js Cart Logic -->
  <script>
    function cartApp() {
      return {
        darkMode: true,
        cart: [],
        loadCart() {
          let stored = localStorage.getItem('cart');
          if(stored) this.cart = JSON.parse(stored);
        },
        saveCart() {
          localStorage.setItem('cart', JSON.stringify(this.cart));
        },
        removeFromCart(index) {
          this.cart.splice(index,1);
          this.saveCart();
        },
        updateQuantity(index, delta) {
          let item = this.cart[index];
          item.quantity += delta;
          if(item.quantity < 1) this.cart.splice(index,1);
          this.saveCart();
        },
        cartTotal() {
          return this.cart.reduce((sum,item) => sum + item.price*item.quantity,0);
        }
      }
    }
  </script>
</body>
</html>

